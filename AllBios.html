<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>All Experts</title>

    <link rel="stylesheet" href="css/facultyexperts.css?ts=<?=time()?>" />

    <!--<script src="bower_components/modernizr/modernizr.js"></script> -->
     <script src="http://www.brooklyn.cuny.edu/web/js/vendor/jquery.js"></script> <!-- jQuery -->
    <!--<script src="http://www.brooklyn.cuny.edu/web/js/foundation/foundation.js"></script> Foundation -->

    <meta property="og:title" content="">
    <meta property="og:type" content="website">
    <meta property="og:url" content="">
    <meta property="og:description" content="">
    <meta property="fb:admins" content="618382230">
    <meta property="og:image" content="">
    <meta name="twitter:title" content="">
    <meta name="twitter:description" content=""> 
    <meta name="twitter:image:src" content="">

    <!-- GA -->
    <!-- FB -->
  </head>

  <body>
  <div id="skipnav"><a href="#mainContent" ga-category="SkipNav" ga-action="Navigate" ga-label="SkipNav" tabindex="0">Skip to Main Content</a></div>

    <div id="content_container">
      <div id="main">
        <h1 class="articleTitle" id="mainContent" role="main" tabindex="0">All Experts</h1>
        <div id="additionalContent">
          
          <section class="allBios"> <!-- this is the main container -->

            <script type="text/javascript">
              $(document).ready(function() {
                // part 1a get all the possible keywords from all bios into an single array
                // establish array 
                var keywordsArray = []; // this will be the full array with the keywords written out
                // get bios
                var bios = $(".bio");
                // for each, get the keywords
                $(bios).each(function(){
                  $(this).addClass("hidden");
                  var bioKeywords = $(this).attr("data-keywords");
                  // console.log(bioKeywords);
                  // turn the keywords into array items
                  var keywordList = $(bioKeywords.trim().split(/\s*,\s*/));
                  // push them into the main keywords array
                  $.merge(keywordsArray, keywordList);
                  //keywordsArray.push(keywordList);
                });
                //console.log(keywordsArray);
                // part 1b make a 2nd array with the same contents lowercase, no spaces
                var filterArray = keywordsArray.slice(0);
                //$(bios).each(function(){
                //  var bioKeywords = $(this).attr("data-keywords");
                //  var keywordList = $(bioKeywords.trim().split(/\s*,\s*/));
                //  $.merge(filterArray, keywordList);
                //});
                $.each(filterArray,function(index,item){
                  filterArray[index] = item.toLowerCase().replace(/\s/g, '').replace(/\./g, '');
                });
                //console.log(filterArray);
                // part 2 rewrite the data-keywords content to be lowercase, no spaces, no commas
                $(bios).each(function(){
                  // make a variable that gets the keywords and changes the strings
                  var bioKeywords = $(this).attr("data-keywords").toLowerCase().replace(/\s/g, '').replace(/,/g , " ");
                  //console.log(bioKeywords);
                  // update the value
                  $(this).attr("data-keywords", bioKeywords);
                });
                // part 3 look at the URL, if there is a filter get it, and hide all bios, then show all that fit the criteria
                var filterTerm = $(location).attr("href").split('=').pop(); //http://www.brooklyn.cuny.edu/web/news/longreads/archive.php?=climatechange
                if(window.location.href.indexOf("?=") > -1) {
                  $(".bio[data-keywords*='"+filterTerm+"']").removeClass("hidden");
                  //append Keyword to the All Stories element
                  var filterLocation = filterArray.indexOf(filterTerm);
                  if (filterTerm === "print" | filterTerm === "phone" | filterTerm === "in-studio" | filterTerm === "videochat" | filterTerm === "on-campus") {
                    $("h1").text("Experts Available for "+keywordsArray[filterLocation]+" Interviews");
                  } else {
                    $("h1").text(keywordsArray[filterLocation]+" Experts");
                  }
                  var biosAmount = $(".bio").size();
                  var biosHidden = $(".bio.hidden").size();
                  //console.log(biosAmount);
                  //console.log(biosHidden);
                  var biosDifference = biosAmount - biosHidden;
                  //console.log(biosDifference);
                  if (biosDifference < 5) {
                    $(".reset.buttonOne").addClass("hidden");
                  }
                } else {
                  // show all stories
                  $(".bio").removeClass("hidden");
                  // hide filter
                  $(".filter").addClass("hidden");
                  $(".reset").addClass("hidden");
                };

                // console.log(filterTerm);
                // part 4 find the filterTerm in filterArray, get its position in the array, (append?) the same term from keywordsArray to the 'All stories in' line of code

                //part 5 reset button
                $(".reset").click(function(e){
                  $(".bio").removeClass("hidden");
                  $("h1").text("All Experts");
                  var url = window.location.href;
                  url = url.split('?')[0]
                  window.history.pushState("data","Title",url);
                  $(".reset").addClass("hidden");
                  //document.title=url;
                });
              });
          </script>

                <button class="reset buttonOne">Reset</button>

                <section class="bio hidden" data-last="Gould" data-name="Kenneth Gould" data-field="Sociology" data-keywords="Environment, Climate Change, Gentrification, Sustainable Development, Environmental Justice, Natural Disasters" data-expertise="Environment, Climate Change, Gentrification, Sustainable Development, Environmental Justice, Natural Disasters" data-url="gould.php"> <!-- this is an individual person -->
                  <section class="photo">
                    <a href="#"><img src="images/gould.jpg" alt="Gould"></a>
                  </section>
                  <section class="details">
                    <h2><a href="gould.php">Kenneth Gould</a></h2>
                    <h3>Professor, <span class="field">Sociology</span></h3>
                    <h3>Expertise</h3>
                    <p class="expertise"><a href="#">Environment</a>, <a href="#">Climate Change</a>, <a href="#">Gentrification</a>, <a href="#">Sustainable Development</a>, <a href="#">Environmental Justice</a>, <a href="#">Natural Disasters</a></p>
                  </section>
                  <section class="bio hidden" data-last="Gould" data-name="Kenneth Gould" data-field="Sociology" data-keywords="Environment, Climate Change, Gentrification, Sustainable Development, Environmental Justice, Natural Disasters" data-expertise="Environment, Climate Change, Gentrification, Sustainable Development, Environmental Justice, Natural Disasters" data-url="gould.php"> <!-- this is an individual person -->
                  <section class="photo">
                    <a href="#"><img src="images/gould.jpg" alt="Gould"></a>
                  </section>
                  <section class="details">
                    <h2><a href="gould.php">Kenneth Gould</a></h2>
                    <h3>Professor, <span class="field">Sociology</span></h3>
                    <h3>Expertise</h3>
                    <p class="expertise"><a href="#">Environment</a>, <a href="#">Climate Change</a>, <a href="#">Gentrification</a>, <a href="#">Sustainable Development</a>, <a href="#">Environmental Justice</a>, <a href="#">Natural Disasters</a></p>
                  </section>
                  <section class="bio hidden" data-last="Gould" data-name="Kenneth Gould" data-field="Sociology" data-keywords="Environment, Climate Change, Gentrification, Sustainable Development, Environmental Justice, Natural Disasters" data-expertise="Environment, Climate Change, Gentrification, Sustainable Development, Environmental Justice, Natural Disasters" data-url="gould.php"> <!-- this is an individual person -->
                  <section class="photo">
                    <a href="#"><img src="images/gould.jpg" alt="Gould"></a>
                  </section>
                  <section class="details">
                    <h2><a href="gould.php">Kenneth Gould</a></h2>
                    <h3>Professor, <span class="field">Sociology</span></h3>
                    <h3>Expertise</h3>
                    <p class="expertise"><a href="#">Environment</a>, <a href="#">Climate Change</a>, <a href="#">Gentrification</a>, <a href="#">Sustainable Development</a>, <a href="#">Environmental Justice</a>, <a href="#">Natural Disasters</a></p>
                  </section>
                  <!-- <section class="">
                    <ul class="contact">
                      <li>718.951.5000 x1234</li>
                      <li><a href="mailto:info@brooklyn.cuny.edu">info@brooklyn.cuny.edu</a></li>
                      <li><a href="https://www.twitter.com">Twitter</a></li>
                      <li><a href="https://www.facebook.com">Facebook</a></li>
                      <li><a href="http://www.brooklyn.cuny.edu">Website</a></li>
                    </ul>
                  </section> -->
                </section><div class="clear"></div>
                <button class="reset">Reset</button>

          </aection>

        </div>
      </div>
    </div>

    <!--<script src="bower_components/jquery/dist/jquery.min.js"></script>
    <script src="bower_components/foundation/js/foundation.min.js"></script>-->
    <!--<script src="js/app.js"></script>-->

    <!--<script>
      $(document).foundation();
    </script>-->

  </body>
</html>